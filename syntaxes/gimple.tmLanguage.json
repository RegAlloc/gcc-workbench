{
  "scopeName": "source.gcc.gimple",
  "patterns": [
    { "include": "#comments" },
    { "include": "#function-header" },
    { "include": "#labels" },
    { "include": "#metadata" },
    { "include": "#phi-nodes" },
    { "include": "#gimple-keywords" },
    { "include": "#operators" },
    { "include": "#control-flow" },
    { "include": "#types" },
    { "include": "#variables" },
    { "include": "#constants" },
    { "include": "#strings" },
    { "include": "#numbers" }
  ],
  "repository": {
    "comments": {
      "patterns": [
        { "match": "//.*$", "name": "comment.line.double-slash.gcc.gimple" },
        { "match": ";;.*$", "name": "comment.line.double-semicolon.gcc.gimple" }
      ]
    },
    "function-header": {
      "match": "^(\\w+\\s+)+\\w+\\s+\\(\\s*\\)",
      "name": "markup.heading.function.gcc.gimple"
    },
    "labels": {
      "match": "<[a-zA-Z0-9_.]+>:",
      "name": "entity.name.label.gcc.gimple"
    },
    "metadata": {
      "patterns": [
        { "match": "<bb \\d+>", "name": "entity.name.label.basic-block.gcc.gimple" },
        { "match": "\\[\\d+\\.\\d+%\\]", "name": "constant.numeric.frequency.gcc.gimple" },
        { "match": "count: \\d+", "name": "constant.numeric.count.gcc.gimple" },
        { "match": "loop_depth\\s+\\d+", "name": "constant.numeric.loop-depth.gcc.gimple" }
      ]
    },
    "phi-nodes": {
      "match": "#\\s+([a-zA-Z0-9_]+)\\s+=\\s+PHI\\s+<",
      "captures": {
        "1": { "name": "variable.parameter.phi-result.gcc.gimple" }
      },
      "name": "meta.phi-node.gcc.gimple"
    },
    "gimple-keywords": {
      "match": "\\b(gimple_call|gimple_assign|gimple_cond|gimple_label|gimple_switch|gimple_return|gimple_goto|gimple_asm|gimple_nop|gimple_debug|gimple_predict|gimple_phi|gimple_catch|gimple_eh_filter|gimple_try|gimple_resx|gimple_bind|gimple_omp_parallel|gimple_omp_for|gimple_omp_task|gimple_omp_target|gimple_omp_sections|gimple_omp_single|gimple_omp_critical|gimple_omp_ordered|gimple_omp_scan|gimple_transaction|gimple_omp_atomic_load|gimple_omp_atomic_store|MEM|ARRAY_REF|COMPONENT_REF|BIT_FIELD_REF|VIEW_CONVERT_EXPR|REALPART_EXPR|IMAGPART_EXPR)\\b",
      "name": "support.function.gimple-stmt.gcc.gimple"
    },
    "operators": {
      "match": "\\b(plus|minus|negate|mult|trunc_div|ceil_div|floor_div|round_div|trunc_mod|rdiv|exact_div|min|max|bit_and|bit_ior|bit_xor|bit_not|lshift|rshift|lt|le|gt|ge|eq|ne|unordered|ordered|unlt|unle|ungt|unge|uneq|ltgt|logical_and|logical_or|logical_not|truth_and|truth_or|truth_xor|truth_not|addr_space_convert|fixed_convert|float|fix|sign_extend|zero_extend|truncate|abs|absu|sqrt|cbrt|fma)\\b",
      "name": "keyword.operator.gimple.gcc.gimple"
    },
    "control-flow": {
      "match": "\\b(if|else|goto|return|switch|case|default|break|continue|try|catch|finally|throw)\\b",
      "name": "keyword.control.gcc.gimple"
    },
    "types": {
      "match": "\\b(void|_Bool|bool|char|int|long|float|double|signed|unsigned|short|int8_t|uint8_t|int16_t|uint16_t|int32_t|uint32_t|int64_t|uint64_t|intptr_t|uintptr_t|size_t|ssize_t|ptrdiff_t|wchar_t|struct|union|enum|const|volatile|restrict|static|extern|inline|auto|register)\\b",
      "name": "storage.type.gcc.gimple"
    },
    "variables": {
      "match": "\\b([a-zA-Z_][a-zA-Z0-9_.]*)(?=\\s*[=:]|\\s*\\[)",
      "name": "variable.other.gimple.gcc.gimple"
    },
    "constants": {
      "match": "\\b(NULL|TRUE|FALSE|true|false|nullptr)\\b",
      "name": "constant.language.gcc.gimple"
    },
    "strings": {
      "match": "\"(?:[^\"\\\\]|\\\\.)*\"",
      "name": "string.quoted.double.gcc.gimple"
    },
    "numbers": {
      "patterns": [
        { "match": "\\b0x[0-9a-fA-F]+\\b", "name": "constant.numeric.hex.gcc.gimple" },
        { "match": "\\b-?\\d+\\.\\d+([eE][+-]?\\d+)?\\b", "name": "constant.numeric.float.gcc.gimple" },
        { "match": "\\b-?\\d+\\b", "name": "constant.numeric.integer.gcc.gimple" }
      ]
    }
  }
}
